--- indextoaddr.c	2010-05-21 11:34:27.000000000 +0800
+++ indextoaddr.c89	2010-10-06 17:23:50.000000000 +0800
@@ -44,7 +44,9 @@
 
 	if (0 == ifindex)		/* any interface or address */
 	{
+#pragma warning( disable : 4244 )
 		ifsa->sa_family = iffamily;
+#pragma warning( default : 4244 )
 		switch (iffamily) {
 		case AF_INET:
 			((struct sockaddr_in*)ifsa)->sin_addr.s_addr = INADDR_ANY;
@@ -61,6 +63,7 @@
 		return TRUE;
 	}
 
+	{
 	struct pgm_ifaddrs_t *ifap, *ifa;
 	if (!pgm_getifaddrs (&ifap, error)) {
 		pgm_prefix_error (error,
@@ -74,6 +77,7 @@
 		    ifa->ifa_addr->sa_family != iffamily)
 			continue;
 
+		{
 		const unsigned i = pgm_if_nametoindex (iffamily, ifa->ifa_name);
 		pgm_assert (0 != i);
 		if (i == ifindex)
@@ -84,6 +88,7 @@
 			pgm_freeifaddrs (ifap);
 			return TRUE;
 		}
+		}
 	}
 
 	pgm_set_error (error,
@@ -93,6 +98,7 @@
 		     ifindex);
 	pgm_freeifaddrs (ifap);
 	return FALSE;
+	}
 }
 
 /* eof */
