<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>QuickFIX: FIX::UtcTimeOnlyConvertor Struct Reference</title>
<link href="quickfix.css" rel="stylesheet" type="text/css">
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td>
	<img src="images/QuickFIX.jpg" align="middle" border=0>
	&nbsp;&nbsp;
	<a href="index.html">Index</a>&nbsp;
	<a href="files.html">Source Files</a>&nbsp;
	<a href="annotated.html">Annotated Class List</a>&nbsp;
	<a href="classes.html">Alphabetical Class List</a>&nbsp;
	<a href="hierarchy.html">Class Hierarchy</a>&nbsp;
	<a href="inherits.html">Graphical Class Hierarchy</a>&nbsp;
   </td>
  </tr>
</table>
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.6.1 -->
  <div class="navpath"><a class="el" href="namespace_f_i_x.html">FIX</a>::<a class="el" href="struct_f_i_x_1_1_utc_time_only_convertor.html">UtcTimeOnlyConvertor</a>
  </div>
<div class="contents">
<h1>FIX::UtcTimeOnlyConvertor Struct Reference</h1><!-- doxytag: class="FIX::UtcTimeOnlyConvertor" -->
<p>Converts a <a class="el" href="class_f_i_x_1_1_utc_time_only.html" title="Time only represented in UTC.">UtcTimeOnly</a> to/from a string.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_field_convertors_8h_source.html">FieldConvertors.h</a>&gt;</code></p>

<p><a href="struct_f_i_x_1_1_utc_time_only_convertor-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_f_i_x_1_1_utc_time_only_convertor.html#ae7d6cd4fc16490e217a5b8557ee65607">convert</a> (const <a class="el" href="class_f_i_x_1_1_utc_time_only.html">UtcTimeOnly</a> &amp;value, bool showMilliseconds=false)  throw ( FieldConvertError )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_f_i_x_1_1_utc_time_only.html">UtcTimeOnly</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_f_i_x_1_1_utc_time_only_convertor.html#af20692193fd86ea4e544f61bf6860870">convert</a> (const std::string &amp;value)  throw ( FieldConvertError )</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Converts a <a class="el" href="class_f_i_x_1_1_utc_time_only.html" title="Time only represented in UTC.">UtcTimeOnly</a> to/from a string. </p>

<p>Definition at line <a class="el" href="_field_convertors_8h_source.html#l00488">488</a> of file <a class="el" href="_field_convertors_8h_source.html">FieldConvertors.h</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="af20692193fd86ea4e544f61bf6860870"></a><!-- doxytag: member="FIX::UtcTimeOnlyConvertor::convert" ref="af20692193fd86ea4e544f61bf6860870" args="(const std::string &amp;value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_f_i_x_1_1_utc_time_only.html">UtcTimeOnly</a> FIX::UtcTimeOnlyConvertor::convert </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>value</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td>  throw ( <a class="el" href="struct_f_i_x_1_1_field_convert_error.html">FieldConvertError</a> )<code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_field_convertors_8h_source.html#l00516">516</a> of file <a class="el" href="_field_convertors_8h_source.html">FieldConvertors.h</a>.</p>

<p>References <a class="el" href="_field_types_8h_source.html#l00684">FIX::TYPE::UtcTimeOnly</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00518"></a>00518   {
<a name="l00519"></a>00519     <span class="keywordtype">bool</span> haveMilliseconds = <span class="keyword">false</span>;
<a name="l00520"></a>00520 
<a name="l00521"></a>00521     <span class="keywordflow">switch</span>( value.size() )
<a name="l00522"></a>00522     {
<a name="l00523"></a>00523       <span class="keywordflow">case</span> 12: haveMilliseconds = <span class="keyword">true</span>;
<a name="l00524"></a>00524       <span class="keywordflow">case</span> 8: <span class="keywordflow">break</span>;
<a name="l00525"></a>00525       <span class="keywordflow">default</span>: <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00526"></a>00526     }
<a name="l00527"></a>00527 
<a name="l00528"></a>00528     <span class="keywordtype">int</span> i = 0;
<a name="l00529"></a>00529     <span class="keywordtype">int</span> c = 0;
<a name="l00530"></a>00530     <span class="keywordflow">for</span>( c = 0; c &lt; 2; ++c )
<a name="l00531"></a>00531       <span class="keywordflow">if</span>( !isdigit(value[i++]) ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00532"></a>00532     <span class="keywordflow">if</span>( value[i++] != <span class="charliteral">&apos;:&apos;</span> ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00533"></a>00533     <span class="keywordflow">for</span>( c = 0; c &lt; 2; ++c )
<a name="l00534"></a>00534       <span class="keywordflow">if</span>( !isdigit(value[i++]) ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00535"></a>00535     <span class="keywordflow">if</span>( value[i++] != <span class="charliteral">&apos;:&apos;</span> ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00536"></a>00536     <span class="keywordflow">for</span>( c = 0; c &lt; 2; ++c )
<a name="l00537"></a>00537       <span class="keywordflow">if</span>( !isdigit(value[i++]) ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00538"></a>00538 
<a name="l00539"></a>00539     <span class="keywordflow">if</span>( haveMilliseconds )
<a name="l00540"></a>00540     {
<a name="l00541"></a>00541       <span class="comment">// ++i instead of i++ skips the &apos;.&apos; separator</span>
<a name="l00542"></a>00542       <span class="keywordflow">for</span>( c = 0; c &lt; 3; ++c )
<a name="l00543"></a>00543               <span class="keywordflow">if</span>( !isdigit(value[++i]) ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00544"></a>00544     }
<a name="l00545"></a>00545 
<a name="l00546"></a>00546     <span class="keywordtype">int</span> hour, min, sec, millis;
<a name="l00547"></a>00547  
<a name="l00548"></a>00548     i = 0;
<a name="l00549"></a>00549 
<a name="l00550"></a>00550     hour = value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00551"></a>00551     hour = 10 * hour + value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00552"></a>00552     <span class="comment">// No check for &gt;= 0 as no &apos;-&apos; are converted here</span>
<a name="l00553"></a>00553     <span class="keywordflow">if</span>( 23 &lt; hour ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00554"></a>00554     ++i; <span class="comment">// skip &apos;:&apos;</span>
<a name="l00555"></a>00555 
<a name="l00556"></a>00556     min = value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00557"></a>00557     min = 10 * min + value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00558"></a>00558     <span class="comment">// No check for &gt;= 0 as no &apos;-&apos; are converted here</span>
<a name="l00559"></a>00559     <span class="keywordflow">if</span>( 59 &lt; min ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00560"></a>00560     ++i; <span class="comment">// skip &apos;:&apos;</span>
<a name="l00561"></a>00561 
<a name="l00562"></a>00562     sec = value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00563"></a>00563     sec = 10 * sec + value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00564"></a>00564     <span class="comment">// No check for &gt;= 0 as no &apos;-&apos; are converted here</span>
<a name="l00565"></a>00565     <span class="keywordflow">if</span>( 60 &lt; sec ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00566"></a>00566 
<a name="l00567"></a>00567     <span class="keywordflow">if</span>( haveMilliseconds )
<a name="l00568"></a>00568     {
<a name="l00569"></a>00569       millis = (100 * (value[i+1] - <span class="charliteral">&apos;0&apos;</span>)
<a name="l00570"></a>00570                 + 10 * (value[i+2] - <span class="charliteral">&apos;0&apos;</span>)
<a name="l00571"></a>00571                 + (value[i+3] - <span class="charliteral">&apos;0&apos;</span>));
<a name="l00572"></a>00572     }
<a name="l00573"></a>00573     <span class="keywordflow">else</span>
<a name="l00574"></a>00574       millis = 0;
<a name="l00575"></a>00575 
<a name="l00576"></a>00576     <span class="keywordflow">return</span> <a class="code" href="namespace_f_i_x_1_1_t_y_p_e.html#aaa75e9d3541784ef1a7e08e68ef39053a0635dba5e599fcf8a0ed7470aa77d67f">UtcTimeOnly</a>( hour, min, sec, millis );
<a name="l00577"></a>00577   }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae7d6cd4fc16490e217a5b8557ee65607"></a><!-- doxytag: member="FIX::UtcTimeOnlyConvertor::convert" ref="ae7d6cd4fc16490e217a5b8557ee65607" args="(const UtcTimeOnly &amp;value, bool showMilliseconds=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static std::string FIX::UtcTimeOnlyConvertor::convert </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_f_i_x_1_1_utc_time_only.html">UtcTimeOnly</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>showMilliseconds</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throw ( <a class="el" href="struct_f_i_x_1_1_field_convert_error.html">FieldConvertError</a> )<code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_field_convertors_8h_source.html#l00490">490</a> of file <a class="el" href="_field_convertors_8h_source.html">FieldConvertors.h</a>.</p>

<p>References <a class="el" href="_field_types_8h_source.html#l00152">FIX::DateTime::getHMS()</a>, and <a class="el" href="_field_convertors_8h_source.html#l00072">FIX::integer_to_string_padded()</a>.</p>

<p>Referenced by <a class="el" href="_data_dictionary_8h_source.html#l00328">FIX::DataDictionary::checkValidFormat()</a>, and <a class="el" href="_session_factory_8cpp_source.html#l00044">FIX::SessionFactory::create()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00493"></a>00493   {
<a name="l00494"></a>00494     <span class="keywordtype">char</span> result[ 9+4 ];
<a name="l00495"></a>00495     <span class="keywordtype">int</span> hour, minute, second, millis;
<a name="l00496"></a>00496 
<a name="l00497"></a>00497     value.getHMS( hour, minute, second, millis );
<a name="l00498"></a>00498 
<a name="l00499"></a>00499     <a class="code" href="namespace_f_i_x.html#a3b509150318586f67a212625e7618ae8">integer_to_string_padded</a> ( result, 3, hour, 2, <span class="charliteral">&apos;0&apos;</span> );
<a name="l00500"></a>00500     result[2] = <span class="charliteral">&apos;:&apos;</span>;
<a name="l00501"></a>00501     <a class="code" href="namespace_f_i_x.html#a3b509150318586f67a212625e7618ae8">integer_to_string_padded</a> ( result + 3, 3, minute,  2, <span class="charliteral">&apos;0&apos;</span> );
<a name="l00502"></a>00502     result[5] = <span class="charliteral">&apos;:&apos;</span>;
<a name="l00503"></a>00503     <a class="code" href="namespace_f_i_x.html#a3b509150318586f67a212625e7618ae8">integer_to_string_padded</a> ( result + 6, 3, second,  2, <span class="charliteral">&apos;0&apos;</span> );
<a name="l00504"></a>00504 
<a name="l00505"></a>00505     <span class="keywordflow">if</span>( showMilliseconds )
<a name="l00506"></a>00506     {
<a name="l00507"></a>00507       result[8] = <span class="charliteral">&apos;.&apos;</span>;
<a name="l00508"></a>00508       <span class="keywordflow">if</span>( <a class="code" href="namespace_f_i_x.html#a3b509150318586f67a212625e7618ae8">integer_to_string_padded</a> ( result + 9, 4, millis, 3, <span class="charliteral">&apos;0&apos;</span> )
<a name="l00509"></a>00509           != result + 9 )
<a name="l00510"></a>00510           <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00511"></a>00511     }
<a name="l00512"></a>00512 
<a name="l00513"></a>00513     <span class="keywordflow">return</span> result;
<a name="l00514"></a>00514   }
</pre></div></p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>/home/omiller/Development/autobuild/quickfix/src/C++/<a class="el" href="_field_convertors_8h_source.html">FieldConvertors.h</a></li>
</ul>
</div>
<hr><address><small>
Generated on Mon Apr 5 21:00:04 2010 for QuickFIX by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.6.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
