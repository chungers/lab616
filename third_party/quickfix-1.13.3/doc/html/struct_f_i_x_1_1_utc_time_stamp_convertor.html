<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>QuickFIX: FIX::UtcTimeStampConvertor Struct Reference</title>
<link href="quickfix.css" rel="stylesheet" type="text/css">
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td>
	<img src="images/QuickFIX.jpg" align="middle" border=0>
	&nbsp;&nbsp;
	<a href="index.html">Index</a>&nbsp;
	<a href="files.html">Source Files</a>&nbsp;
	<a href="annotated.html">Annotated Class List</a>&nbsp;
	<a href="classes.html">Alphabetical Class List</a>&nbsp;
	<a href="hierarchy.html">Class Hierarchy</a>&nbsp;
	<a href="inherits.html">Graphical Class Hierarchy</a>&nbsp;
   </td>
  </tr>
</table>
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.6.1 -->
  <div class="navpath"><a class="el" href="namespace_f_i_x.html">FIX</a>::<a class="el" href="struct_f_i_x_1_1_utc_time_stamp_convertor.html">UtcTimeStampConvertor</a>
  </div>
<div class="contents">
<h1>FIX::UtcTimeStampConvertor Struct Reference</h1><!-- doxytag: class="FIX::UtcTimeStampConvertor" -->
<p>Converts a <a class="el" href="class_f_i_x_1_1_utc_time_stamp.html" title="Date and Time represented in UTC.">UtcTimeStamp</a> to/from a string.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_field_convertors_8h_source.html">FieldConvertors.h</a>&gt;</code></p>

<p><a href="struct_f_i_x_1_1_utc_time_stamp_convertor-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_f_i_x_1_1_utc_time_stamp_convertor.html#a423a4d273df7a1925982e169316625fd">convert</a> (const <a class="el" href="class_f_i_x_1_1_utc_time_stamp.html">UtcTimeStamp</a> &amp;value, bool showMilliseconds=false)  throw ( FieldConvertError )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_f_i_x_1_1_utc_time_stamp.html">UtcTimeStamp</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_f_i_x_1_1_utc_time_stamp_convertor.html#a9e45b0a7aea29e1aa7d067cfd830b330">convert</a> (const std::string &amp;value, bool calculateDays=false)  throw ( FieldConvertError )</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Converts a <a class="el" href="class_f_i_x_1_1_utc_time_stamp.html" title="Date and Time represented in UTC.">UtcTimeStamp</a> to/from a string. </p>

<p>Definition at line <a class="el" href="_field_convertors_8h_source.html#l00365">365</a> of file <a class="el" href="_field_convertors_8h_source.html">FieldConvertors.h</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a9e45b0a7aea29e1aa7d067cfd830b330"></a><!-- doxytag: member="FIX::UtcTimeStampConvertor::convert" ref="a9e45b0a7aea29e1aa7d067cfd830b330" args="(const std::string &amp;value, bool calculateDays=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_f_i_x_1_1_utc_time_stamp.html">UtcTimeStamp</a> FIX::UtcTimeStampConvertor::convert </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>calculateDays</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throw ( <a class="el" href="struct_f_i_x_1_1_field_convert_error.html">FieldConvertError</a> )<code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_field_convertors_8h_source.html#l00400">400</a> of file <a class="el" href="_field_convertors_8h_source.html">FieldConvertors.h</a>.</p>

<p>References <a class="el" href="_field_types_8h_source.html#l00674">FIX::TYPE::UtcTimeStamp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00403"></a>00403   {
<a name="l00404"></a>00404     <span class="keywordtype">bool</span> haveMilliseconds = <span class="keyword">false</span>;
<a name="l00405"></a>00405 
<a name="l00406"></a>00406     <span class="keywordflow">switch</span>( value.size() )
<a name="l00407"></a>00407     {
<a name="l00408"></a>00408       <span class="keywordflow">case</span> 21: haveMilliseconds = <span class="keyword">true</span>;
<a name="l00409"></a>00409       <span class="keywordflow">case</span> 17: <span class="keywordflow">break</span>;
<a name="l00410"></a>00410       <span class="keywordflow">default</span>: <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00411"></a>00411     }
<a name="l00412"></a>00412 
<a name="l00413"></a>00413     <span class="keywordtype">int</span> i = 0;
<a name="l00414"></a>00414     <span class="keywordtype">int</span> c = 0;
<a name="l00415"></a>00415     <span class="keywordflow">for</span>( c = 0; c &lt; 8; ++c )
<a name="l00416"></a>00416       <span class="keywordflow">if</span>( !isdigit(value[i++]) ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00417"></a>00417     <span class="keywordflow">if</span> (value[i++] != <span class="charliteral">&apos;-&apos;</span>) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00418"></a>00418     <span class="keywordflow">for</span>( c = 0; c &lt; 2; ++c )
<a name="l00419"></a>00419       <span class="keywordflow">if</span>( !isdigit(value[i++]) ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00420"></a>00420     <span class="keywordflow">if</span>( value[i++] != <span class="charliteral">&apos;:&apos;</span> ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00421"></a>00421     <span class="keywordflow">for</span>( c = 0; c &lt; 2; ++c )
<a name="l00422"></a>00422       <span class="keywordflow">if</span>( !isdigit(value[i++]) ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00423"></a>00423     <span class="keywordflow">if</span>( value[i++] != <span class="charliteral">&apos;:&apos;</span> ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00424"></a>00424     <span class="keywordflow">for</span>( c = 0; c &lt; 2; ++c )
<a name="l00425"></a>00425       <span class="keywordflow">if</span>( !isdigit(value[i++]) ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00426"></a>00426 
<a name="l00427"></a>00427     <span class="keywordflow">if</span>( haveMilliseconds )
<a name="l00428"></a>00428     {
<a name="l00429"></a>00429       <span class="keywordflow">if</span>( value[i++] != <span class="charliteral">&apos;.&apos;</span> ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00430"></a>00430       <span class="keywordflow">for</span>( c = 0; c &lt; 3; ++c )
<a name="l00431"></a>00431               <span class="keywordflow">if</span>( !isdigit(value[i++]) ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00432"></a>00432     }
<a name="l00433"></a>00433 
<a name="l00434"></a>00434     <span class="keywordtype">int</span> year, mon, mday, hour, min, sec, millis;
<a name="l00435"></a>00435 
<a name="l00436"></a>00436     i = 0;
<a name="l00437"></a>00437 
<a name="l00438"></a>00438     year = value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00439"></a>00439     year = 10 * year + value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00440"></a>00440     year = 10 * year + value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00441"></a>00441     year = 10 * year + value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00442"></a>00442 
<a name="l00443"></a>00443     mon = value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00444"></a>00444     mon = 10 * mon + value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00445"></a>00445     <span class="keywordflow">if</span>( mon &lt; 1 || 12 &lt; mon ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00446"></a>00446 
<a name="l00447"></a>00447     mday = value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00448"></a>00448     mday = 10 * mday + value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00449"></a>00449     <span class="keywordflow">if</span>( mday &lt; 1 || 31 &lt; mday ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00450"></a>00450 
<a name="l00451"></a>00451     ++i; <span class="comment">// skip &apos;-&apos;</span>
<a name="l00452"></a>00452 
<a name="l00453"></a>00453     hour = value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00454"></a>00454     hour = 10 * hour + value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00455"></a>00455     <span class="comment">// No check for &gt;= 0 as no &apos;-&apos; are converted here</span>
<a name="l00456"></a>00456     <span class="keywordflow">if</span>( 23 &lt; hour ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00457"></a>00457 
<a name="l00458"></a>00458     ++i; <span class="comment">// skip &apos;:&apos;</span>
<a name="l00459"></a>00459 
<a name="l00460"></a>00460     min = value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00461"></a>00461     min = 10 * min + value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00462"></a>00462     <span class="comment">// No check for &gt;= 0 as no &apos;-&apos; are converted here</span>
<a name="l00463"></a>00463     <span class="keywordflow">if</span>( 59 &lt; min ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00464"></a>00464 
<a name="l00465"></a>00465     ++i; <span class="comment">// skip &apos;:&apos;</span>
<a name="l00466"></a>00466 
<a name="l00467"></a>00467     sec = value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00468"></a>00468     sec = 10 * sec + value[i++] - <span class="charliteral">&apos;0&apos;</span>;
<a name="l00469"></a>00469 
<a name="l00470"></a>00470     <span class="comment">// No check for &gt;= 0 as no &apos;-&apos; are converted here</span>
<a name="l00471"></a>00471     <span class="keywordflow">if</span>( 60 &lt; sec ) <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00472"></a>00472 
<a name="l00473"></a>00473     <span class="keywordflow">if</span>( haveMilliseconds )
<a name="l00474"></a>00474     {
<a name="l00475"></a>00475       millis = (100 * (value[i+1] - <span class="charliteral">&apos;0&apos;</span>)
<a name="l00476"></a>00476                 + 10 * (value[i+2] - <span class="charliteral">&apos;0&apos;</span>)
<a name="l00477"></a>00477                 + (value[i+3] - <span class="charliteral">&apos;0&apos;</span>));
<a name="l00478"></a>00478     }
<a name="l00479"></a>00479     <span class="keywordflow">else</span>
<a name="l00480"></a>00480       millis = 0;
<a name="l00481"></a>00481 
<a name="l00482"></a>00482     <span class="keywordflow">return</span> <a class="code" href="namespace_f_i_x_1_1_t_y_p_e.html#aaa75e9d3541784ef1a7e08e68ef39053a87ce7f32ae2bc277961e1f9865728b85">UtcTimeStamp</a> (hour, min, sec, millis,
<a name="l00483"></a>00483                          mday, mon, year);
<a name="l00484"></a>00484   }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a423a4d273df7a1925982e169316625fd"></a><!-- doxytag: member="FIX::UtcTimeStampConvertor::convert" ref="a423a4d273df7a1925982e169316625fd" args="(const UtcTimeStamp &amp;value, bool showMilliseconds=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static std::string FIX::UtcTimeStampConvertor::convert </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_f_i_x_1_1_utc_time_stamp.html">UtcTimeStamp</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>showMilliseconds</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throw ( <a class="el" href="struct_f_i_x_1_1_field_convert_error.html">FieldConvertError</a> )<code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_field_convertors_8h_source.html#l00367">367</a> of file <a class="el" href="_field_convertors_8h_source.html">FieldConvertors.h</a>.</p>

<p>References <a class="el" href="_field_types_8h_source.html#l00152">FIX::DateTime::getHMS()</a>, <a class="el" href="_field_types_8h_source.html#l00145">FIX::DateTime::getYMD()</a>, and <a class="el" href="_field_convertors_8h_source.html#l00072">FIX::integer_to_string_padded()</a>.</p>

<p>Referenced by <a class="el" href="_data_dictionary_8h_source.html#l00328">FIX::DataDictionary::checkValidFormat()</a>, <a class="el" href="_log_8h_source.html#l00152">FIX::ScreenLog::onEvent()</a>, <a class="el" href="_file_log_8h_source.html#l00085">FIX::FileLog::onEvent()</a>, <a class="el" href="_log_8h_source.html#l00130">FIX::ScreenLog::onIncoming()</a>, <a class="el" href="_file_log_8h_source.html#l00081">FIX::FileLog::onIncoming()</a>, <a class="el" href="_log_8h_source.html#l00141">FIX::ScreenLog::onOutgoing()</a>, <a class="el" href="_file_log_8h_source.html#l00083">FIX::FileLog::onOutgoing()</a>, <a class="el" href="_file_store_8cpp_source.html#l00130">FIX::FileStore::populateCache()</a>, and <a class="el" href="_file_store_8cpp_source.html#l00322">FIX::FileStore::setSession()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00370"></a>00370   {
<a name="l00371"></a>00371     <span class="keywordtype">char</span> result[ 18+4 ];
<a name="l00372"></a>00372     <span class="keywordtype">int</span> year, month, day, hour, minute, second, millis;
<a name="l00373"></a>00373 
<a name="l00374"></a>00374     value.getYMD( year, month, day );
<a name="l00375"></a>00375     value.getHMS( hour, minute, second, millis );
<a name="l00376"></a>00376 
<a name="l00377"></a>00377     <a class="code" href="namespace_f_i_x.html#a3b509150318586f67a212625e7618ae8">integer_to_string_padded</a>( result, 5, year, 4, <span class="charliteral">&apos;0&apos;</span> );
<a name="l00378"></a>00378     <a class="code" href="namespace_f_i_x.html#a3b509150318586f67a212625e7618ae8">integer_to_string_padded</a>( result + 4, 3, month, 2, <span class="charliteral">&apos;0&apos;</span> );
<a name="l00379"></a>00379     <a class="code" href="namespace_f_i_x.html#a3b509150318586f67a212625e7618ae8">integer_to_string_padded</a>( result + 6, 3, day, 2, <span class="charliteral">&apos;0&apos;</span> );
<a name="l00380"></a>00380     result[8]  = <span class="charliteral">&apos;-&apos;</span>;
<a name="l00381"></a>00381     <a class="code" href="namespace_f_i_x.html#a3b509150318586f67a212625e7618ae8">integer_to_string_padded</a>( result + 9, 3, hour, 2, <span class="charliteral">&apos;0&apos;</span> );
<a name="l00382"></a>00382     result[11] = <span class="charliteral">&apos;:&apos;</span>;
<a name="l00383"></a>00383     <a class="code" href="namespace_f_i_x.html#a3b509150318586f67a212625e7618ae8">integer_to_string_padded</a>( result + 12, 3, minute, 2, <span class="charliteral">&apos;0&apos;</span> );
<a name="l00384"></a>00384     result[14] = <span class="charliteral">&apos;:&apos;</span>;
<a name="l00385"></a>00385     <a class="code" href="namespace_f_i_x.html#a3b509150318586f67a212625e7618ae8">integer_to_string_padded</a>( result + 15, 3, second, 2, <span class="charliteral">&apos;0&apos;</span> );
<a name="l00386"></a>00386 
<a name="l00387"></a>00387     <span class="keywordflow">if</span>( showMilliseconds )
<a name="l00388"></a>00388     {
<a name="l00389"></a>00389       result[17] = <span class="charliteral">&apos;.&apos;</span>;
<a name="l00390"></a>00390       <span class="keywordflow">if</span>( <a class="code" href="namespace_f_i_x.html#a3b509150318586f67a212625e7618ae8">integer_to_string_padded</a> ( result + 18, 4, millis, 3, <span class="charliteral">&apos;0&apos;</span> )
<a name="l00391"></a>00391           != result + 18 )
<a name="l00392"></a>00392       {
<a name="l00393"></a>00393         <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00394"></a>00394       }
<a name="l00395"></a>00395     }
<a name="l00396"></a>00396 
<a name="l00397"></a>00397     <span class="keywordflow">return</span> result;
<a name="l00398"></a>00398   }
</pre></div></p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>/home/omiller/Development/autobuild/quickfix/src/C++/<a class="el" href="_field_convertors_8h_source.html">FieldConvertors.h</a></li>
</ul>
</div>
<hr><address><small>
Generated on Mon Apr 5 21:00:04 2010 for QuickFIX by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.6.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
