<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>QuickFIX: FIX::DoubleConvertor Struct Reference</title>
<link href="quickfix.css" rel="stylesheet" type="text/css">
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td>
	<img src="images/QuickFIX.jpg" align="middle" border=0>
	&nbsp;&nbsp;
	<a href="index.html">Index</a>&nbsp;
	<a href="files.html">Source Files</a>&nbsp;
	<a href="annotated.html">Annotated Class List</a>&nbsp;
	<a href="classes.html">Alphabetical Class List</a>&nbsp;
	<a href="hierarchy.html">Class Hierarchy</a>&nbsp;
	<a href="inherits.html">Graphical Class Hierarchy</a>&nbsp;
   </td>
  </tr>
</table>
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.6.1 -->
  <div class="navpath"><a class="el" href="namespace_f_i_x.html">FIX</a>::<a class="el" href="struct_f_i_x_1_1_double_convertor.html">DoubleConvertor</a>
  </div>
<div class="contents">
<h1>FIX::DoubleConvertor Struct Reference</h1><!-- doxytag: class="FIX::DoubleConvertor" -->
<p>Converts double to/from a string.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_field_convertors_8h_source.html">FieldConvertors.h</a>&gt;</code></p>

<p><a href="struct_f_i_x_1_1_double_convertor-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_f_i_x_1_1_double_convertor.html#ad37a4b67c6317959a6fb8f630fb2858d">convert</a> (double value, int padding=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_f_i_x_1_1_double_convertor.html#aaf01d143f357c55982d0d0ae6820db64">convert</a> (const std::string &amp;value, double &amp;result)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_f_i_x_1_1_double_convertor.html#ac86da431c00c6eccafb3039522f76cab">convert</a> (const std::string &amp;value)  throw ( FieldConvertError )</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Converts double to/from a string. </p>

<p>Definition at line <a class="el" href="_field_convertors_8h_source.html#l00201">201</a> of file <a class="el" href="_field_convertors_8h_source.html">FieldConvertors.h</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ac86da431c00c6eccafb3039522f76cab"></a><!-- doxytag: member="FIX::DoubleConvertor::convert" ref="ac86da431c00c6eccafb3039522f76cab" args="(const std::string &amp;value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static double FIX::DoubleConvertor::convert </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>value</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td>  throw ( <a class="el" href="struct_f_i_x_1_1_field_convert_error.html">FieldConvertError</a> )<code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_field_convertors_8h_source.html#l00293">293</a> of file <a class="el" href="_field_convertors_8h_source.html">FieldConvertors.h</a>.</p>

<p>References <a class="el" href="_field_convertors_8h_source.html#l00203">convert()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00295"></a>00295   {
<a name="l00296"></a>00296     <span class="keywordtype">double</span> result = 0.0;
<a name="l00297"></a>00297     <span class="keywordflow">if</span>( !<a class="code" href="struct_f_i_x_1_1_double_convertor.html#ad37a4b67c6317959a6fb8f630fb2858d">convert</a>( value, result ) )
<a name="l00298"></a>00298       <span class="keywordflow">throw</span> FieldConvertError();
<a name="l00299"></a>00299     <span class="keywordflow">else</span>
<a name="l00300"></a>00300       <span class="keywordflow">return</span> result;
<a name="l00301"></a>00301   }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aaf01d143f357c55982d0d0ae6820db64"></a><!-- doxytag: member="FIX::DoubleConvertor::convert" ref="aaf01d143f357c55982d0d0ae6820db64" args="(const std::string &amp;value, double &amp;result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool FIX::DoubleConvertor::convert </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&nbsp;</td>
          <td class="paramname"> <em>result</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_field_convertors_8h_source.html#l00265">265</a> of file <a class="el" href="_field_convertors_8h_source.html">FieldConvertors.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00266"></a>00266 {
<a name="l00267"></a>00267   <span class="keyword">const</span> <span class="keywordtype">char</span> * i = value.c_str();
<a name="l00268"></a>00268 
<a name="l00269"></a>00269   <span class="comment">// Catch null strings</span>
<a name="l00270"></a>00270   <span class="keywordflow">if</span>( !*i ) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00271"></a>00271   <span class="comment">// Eat leading &apos;-&apos; and recheck for null string</span>
<a name="l00272"></a>00272   <span class="keywordflow">if</span>( *i == <span class="charliteral">&apos;-&apos;</span> &amp;&amp; !*++i ) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00273"></a>00273 
<a name="l00274"></a>00274   <span class="keywordtype">bool</span> haveDigit = <span class="keyword">false</span>;
<a name="l00275"></a>00275 
<a name="l00276"></a>00276   <span class="keywordflow">if</span>( isdigit(*i) )
<a name="l00277"></a>00277   {
<a name="l00278"></a>00278     haveDigit = <span class="keyword">true</span>;
<a name="l00279"></a>00279     <span class="keywordflow">while</span>( isdigit (*++i) );
<a name="l00280"></a>00280   }
<a name="l00281"></a>00281 
<a name="l00282"></a>00282   <span class="keywordflow">if</span>( *i == <span class="charliteral">&apos;.&apos;</span> &amp;&amp; isdigit(*++i) )
<a name="l00283"></a>00283   {
<a name="l00284"></a>00284     haveDigit = <span class="keyword">true</span>;
<a name="l00285"></a>00285     <span class="keywordflow">while</span>( isdigit (*++i) );
<a name="l00286"></a>00286   }
<a name="l00287"></a>00287 
<a name="l00288"></a>00288   <span class="keywordflow">if</span>( *i || !haveDigit ) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00289"></a>00289     result = strtod( value.c_str(), 0 );
<a name="l00290"></a>00290     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00291"></a>00291   }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad37a4b67c6317959a6fb8f630fb2858d"></a><!-- doxytag: member="FIX::DoubleConvertor::convert" ref="ad37a4b67c6317959a6fb8f630fb2858d" args="(double value, int padding=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static std::string FIX::DoubleConvertor::convert </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>padding</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_field_convertors_8h_source.html#l00203">203</a> of file <a class="el" href="_field_convertors_8h_source.html">FieldConvertors.h</a>.</p>

<p>References <a class="el" href="_utility_8h_source.html#l00181">STRING_SPRINTF</a>.</p>

<p>Referenced by <a class="el" href="_data_dictionary_8h_source.html#l00328">FIX::DataDictionary::checkValidFormat()</a>, <a class="el" href="_field_convertors_8h_source.html#l00293">convert()</a>, <a class="el" href="_dictionary_8cpp_source.html#l00067">FIX::Dictionary::getDouble()</a>, and <a class="el" href="_dictionary_8cpp_source.html#l00145">FIX::Dictionary::setDouble()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00204"></a>00204   {
<a name="l00205"></a>00205     <span class="keywordtype">char</span> result[32];
<a name="l00206"></a>00206     <span class="keywordtype">char</span> *end = 0;
<a name="l00207"></a>00207 
<a name="l00208"></a>00208     <span class="keywordtype">int</span> size;
<a name="l00209"></a>00209     <span class="keywordflow">if</span>( value == 0 || value &gt; 0.0001 || value &lt;= -0.0001 )
<a name="l00210"></a>00210     {
<a name="l00211"></a>00211       size = <a class="code" href="_utility_8h.html#aa538496316e49b20bf5a8999d22b854c">STRING_SPRINTF</a>( result, <span class="stringliteral">&quot;%.15g&quot;</span>, value );
<a name="l00212"></a>00212 
<a name="l00213"></a>00213       <span class="keywordflow">if</span>( padding &gt; 0 )
<a name="l00214"></a>00214       {
<a name="l00215"></a>00215         <span class="keywordtype">char</span>* point = result;
<a name="l00216"></a>00216         end = result + size - 1;
<a name="l00217"></a>00217         <span class="keywordflow">while</span>( *point != <span class="charliteral">&apos;.&apos;</span> &amp;&amp; *point != 0 )
<a name="l00218"></a>00218           point++;
<a name="l00219"></a>00219 
<a name="l00220"></a>00220         <span class="keywordflow">if</span>( *point == 0 )
<a name="l00221"></a>00221         {
<a name="l00222"></a>00222           end = point;
<a name="l00223"></a>00223           *point = <span class="charliteral">&apos;.&apos;</span>;
<a name="l00224"></a>00224           size++;
<a name="l00225"></a>00225         }
<a name="l00226"></a>00226         <span class="keywordtype">int</span> needed = padding - (int)(end - point);
<a name="l00227"></a>00227 
<a name="l00228"></a>00228         <span class="keywordflow">while</span>( needed-- &gt; 0 )
<a name="l00229"></a>00229         {
<a name="l00230"></a>00230           *(++end) = <span class="charliteral">&apos;0&apos;</span>;
<a name="l00231"></a>00231           size++;
<a name="l00232"></a>00232         }
<a name="l00233"></a>00233         *(end+1) = 0;
<a name="l00234"></a>00234       }
<a name="l00235"></a>00235     }
<a name="l00236"></a>00236     <span class="keywordflow">else</span>
<a name="l00237"></a>00237     {
<a name="l00238"></a>00238       size = <a class="code" href="_utility_8h.html#aa538496316e49b20bf5a8999d22b854c">STRING_SPRINTF</a>( result, <span class="stringliteral">&quot;%.15f&quot;</span>, value );
<a name="l00239"></a>00239       <span class="comment">// strip trailing 0&apos;s</span>
<a name="l00240"></a>00240       end = result + size - 1;
<a name="l00241"></a>00241 
<a name="l00242"></a>00242       <span class="keywordflow">if</span>( padding &gt; 0 )
<a name="l00243"></a>00243       {
<a name="l00244"></a>00244         <span class="keywordtype">int</span> discard = 15 - padding;
<a name="l00245"></a>00245 
<a name="l00246"></a>00246         <span class="keywordflow">while</span>( (*end == <span class="charliteral">&apos;0&apos;</span>) &amp;&amp; (discard-- &gt; 0) )
<a name="l00247"></a>00247         {
<a name="l00248"></a>00248           *(end--) = 0;
<a name="l00249"></a>00249           size--;
<a name="l00250"></a>00250         }
<a name="l00251"></a>00251      }
<a name="l00252"></a>00252      <span class="keywordflow">else</span>
<a name="l00253"></a>00253      {
<a name="l00254"></a>00254        <span class="keywordflow">while</span>( *end == <span class="charliteral">&apos;0&apos;</span> )
<a name="l00255"></a>00255        {
<a name="l00256"></a>00256          *(end--) = 0;
<a name="l00257"></a>00257          size--;
<a name="l00258"></a>00258        }
<a name="l00259"></a>00259      }
<a name="l00260"></a>00260    }
<a name="l00261"></a>00261 
<a name="l00262"></a>00262    <span class="keywordflow">return</span> std::string( result, size );
<a name="l00263"></a>00263 }
</pre></div></p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>/home/omiller/Development/autobuild/quickfix/src/C++/<a class="el" href="_field_convertors_8h_source.html">FieldConvertors.h</a></li>
</ul>
</div>
<hr><address><small>
Generated on Mon Apr 5 21:00:04 2010 for QuickFIX by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.6.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
