<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;4.&nbsp;Additional Event Representations</title><link rel="stylesheet" href="../shared/css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="EsperIO Adapters"><link rel="up" href="index.html" title="EsperIO Adapters"><link rel="previous" href="adapter_jms_spring.html" title="Chapter&nbsp;3.&nbsp;The Spring JMS Input and Output Adapters"><link rel="next" href="adapter_opentick.html" title="Chapter&nbsp;5.&nbsp;The Opentick Input Adapter"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;4.&nbsp;Additional Event Representations</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="adapter_jms_spring.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="adapter_opentick.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="adapter_event_representations"></a>Chapter&nbsp;4.&nbsp;Additional Event Representations</h2></div></div><div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="eventrep-axiom"></a>4.1.&nbsp;Apache Axiom Events</h2></div></div><div></div></div><p>
			The plug-in event representation based on Apache Axiom can process XML documents by means of the Streaming API for XML (StAX) and the concept of "pull parsing", which can gain performance improvements extracting data from XML documents.
		</p><p>
			The instructions below have been tested with Apache Axiom version 1.2.5. Please visit <tt class="literal">http://ws.apache.org/commons/axiom/</tt> for more information.
			Apache Axiom requires additional jar files that are not part of the EsperIO distribution and must be downloaded separately.
		</p><p>
			There are 3 steps to follow:
		</p><div class="orderedlist"><ol type="1" compact><li><p>
					Enable Apache Axiom by adding the Axiom even representation to the engine configuration.
				</p></li><li><p>
					Register your application event type names.
				</p></li><li><p>
					Process <tt class="literal">org.apache.axiom.om.OMDocument</tt> or <tt class="literal">OMElement</tt> event objects.
				</p></li></ol></div><p>
			To enable Apache Axiom event processing, use the code snippet shown next, or configure via confiugration XML:
		</p><pre class="programlisting">Configuration config = new Configuration();
config.addPlugInEventRepresentation(new URI("type://xml/apacheaxiom/OMNode"),
    AxiomEventRepresentation.class.getName(), null);</pre><p>
			Your application may register Axiom event types in advance. Here is sample code for adding event types based on Axiom:
		</p><pre class="programlisting">ConfigurationEventTypeAxiom desc = new ConfigurationEventTypeAxiom();
desc.setRootElementName("measurement");
desc.addXPathProperty("measurement", "/sensor/measurement", XPathConstants.NUMBER);
URI[] resolveURIs = new URI[] {new URI("type://xml/apacheaxiom/OMNode/SensorEvent")};
configuration.addPlugInEventType("SensorEvent", resolveURIs, desc);</pre><p>
			The operation above is available at configuration time and also at runtime via <tt class="literal">ConfigurationOperations</tt>. After registering an event type name as above, your application can create EPL statements.
		</p><p>
			To send Axiom <tt class="literal">OMDocument</tt>  or <tt class="literal">OMElement</tt> events into the engine, your application code must obtain an <tt class="literal">EventSender</tt> to process Axiom <tt class="literal">OMElement</tt> events:
		</p><pre class="programlisting">URI[] resolveURIs = new URI[] {new URI("type://xml/apacheaxiom/OMNode/SensorEvent")};
EventSender sender = epService.getEPRuntime().getEventSender(resolveURIs);

String xml = "&lt;measurement&gt;&lt;temperature&gt;98.6&lt;/temperature&gt;&lt;/measurement&gt;";
InputStream s = new ByteArrayInputStream(xml.getBytes());
OMElement omElement = new StAXOMBuilder(s).getDocumentElement();

sender.sendEvent(omElement);</pre></div><p>
			Configuring an Axiom event type via XML is easy. An Esper configuration XML can be found in the file <tt class="literal">esper-axiom-sample-configuration.xml</tt> in the <tt class="literal">etc</tt>  folder of the EsperIO distribution.
		</p><p>
			The configuration XML for the <tt class="literal">ConfigurationEventTypeAxiom</tt> class adheres to the schema <tt class="literal">esperio-axiom-configuration-3-0.xsd</tt> also in the <tt class="literal">etc</tt> folder of the EsperIO distribution.
		</p></div><hr xmlns="http://www.w3.org/TR/xhtml1/transitional"><center xmlns="http://www.w3.org/TR/xhtml1/transitional">&copy; 2009 EsperTech Inc. All Rights Reserved</center><script xmlns="http://www.w3.org/TR/xhtml1/transitional" type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script><script xmlns="http://www.w3.org/TR/xhtml1/transitional" type="text/javascript">
	var pageTracker = _gat._getTracker("UA-1261295-1");
	pageTracker._trackPageview();
	</script><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="adapter_jms_spring.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="adapter_opentick.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;3.&nbsp;The Spring JMS Input and Output Adapters&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;5.&nbsp;The Opentick Input Adapter</td></tr></table></div></body></html>